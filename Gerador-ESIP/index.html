<!-- FILE: index.html -->
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ“¡ ESIP-Sistemas â€“ Controle de Acesso e ValidaÃ§Ã£o Antifraude</title>

  <!-- PWA manifest -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0a0f24">

  <!-- Fav / icon placeholder -->
  <link rel="icon" href="/icons/icon-192.png">

  <!-- External libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    :root{--bg:#0a0f24;--card:#11182f;--accent:#1e2a78;--accent-2:#2840c0;--muted:#7eb6ff}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:#fff;-webkit-font-smoothing:antialiased}
    header{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:16px;
  padding:28px 20px;
  background:linear-gradient(180deg,#0d1540,#0a0f24);
  border-bottom:3px solid var(--accent);
}
@media(max-width:600px){
  header{justify-content:center;text-align:center}
  header .brand{flex-direction:column}
  header .brand img{height:48px}
  header .brand h1{font-size:18px}
  header .btn{padding:10px 14px;font-size:14px}
  header div[style*="margin-left:auto"]{margin-left:0 !important;justify-content:center;width:100%}
}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{height:56px;width:auto;border-radius:8px}
    .brand h1{font-size:20px;margin:0}
    .brand p{margin:0;font-size:12px;opacity:.9;color:var(--muted)}
    .hero{padding:32px 20px;text-align:center}
    .hero h2{font-size:20px;margin:0 0 8px;color:var(--muted)}
    .hero p{max-width:780px;margin:0 auto 18px;opacity:.9;line-height:1.5}

    .container{max-width:980px;margin:18px auto;padding:0 18px}
    .box{background:var(--card);padding:20px;border-radius:12px;border:1px solid var(--accent);margin-bottom:18px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:12px 18px;background:var(--accent);border-radius:10px;color:#fff;text-decoration:none;font-weight:600;border:none;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,.06)}
    .btn:hover{transform:translateY(-2px);transition:.18s}

    input[type=text]{width:100%;padding:12px;border-radius:8px;border:none;background:#0b1330;color:#fff}
    #qrResult{display:flex;justify-content:center;margin-top:16px}
    #qrResult canvas, #qrResult img{border-radius:8px}

    footer{padding:18px;text-align:center;opacity:.75;font-size:13px}

    /* responsive */
    @media(min-width:720px){.hero h2{font-size:24px}.brand h1{font-size:24px}}
  </style>
<style>
  section:empty {
    position: relative;
    min-height: 120px;
    display: flex !important;
    align-items: center;
    justify-content: center;
    background: rgba(255,255,255,0.04) !important;
    border: 1px dashed #3b4b9c !important;
    border-radius: 12px;
}
section:empty::before {
    content: "ğŸ”’ BLOQUEADO ATÃ‰ ATIVAÃ‡ÃƒO";
    color: #7eb6ff;
    font-size: 1rem;
    opacity: 0.85;
}
</style>
</head>
<body>

<header>
  <div class="brand">
    <!-- If you already have a logo file, name it "logo.png" and place it next to index.html. If not, the text will show. -->
    <img src="logo.png" alt="ESIP-Sistemas" onerror="this.style.display='none'">
    <div>
      <h1>ğŸ“¡ ESIP - Sistemas SeguranÃ§a Anti-fraude</h1>
<p style="color:#4da3ff; font-size:1.1rem; margin-top:8px;">A soluÃ§Ã£o mais avanÃ§ada em validaÃ§Ã£o, seguranÃ§a e controle de acesso.</p>
      <p>Controle de Acesso â€¢ ValidaÃ§Ã£o Antifraude â€¢ QR Code</p>
    </div>
  </div>
  <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
    <a class="btn secondary" href="leitor.html">ğŸ“² Abrir Leitor</a>
    <a class="btn" href="#gerador">ğŸ§© Gerador</a>
  </div>
</header>



  <!-- QR Generator -->
  <section id="gerador" class="box">
    <h3>ğŸ§© Gerar QR Code de Teste</h3>
    <p style="opacity:.9">Digite qualquer texto (nome / cÃ³digo) para gerar um QR vÃ¡lido. Limite: <strong>5 geraÃ§Ãµes</strong>.</p>

    <input id="qrText" type="text" placeholder="Digite algo (ex: NOME - ID)" maxlength="120">
    <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
      <button class="btn" onclick="generateQR()">Gerar QR Code</button>
      <button class="btn secondary" id="downloadPNGBtn" onclick="downloadPNG()" disabled>ğŸ“¥ Baixar PNG</button>
      <button class="btn secondary" id="downloadPDFBtn" onclick="downloadPDF()" disabled>ğŸ“„ Baixar PDF</button>
    </div>

    <div id="qrResult"></div>
    <p id="limitMsg" style="color:#ff6b6b;margin-top:10px"></p>
  </section>

  <!-- About -->
  <section class="box">
    <h3>ğŸ“¦ Sobre o ESIP-Sistemas</h3>
    <p style="text-align:left;line-height:1.6;opacity:.95">O <strong>ESIP-Sistemas</strong> Ã© uma plataforma avanÃ§ada de controle de acesso digital com validaÃ§Ã£o antifraude via QR Code. Projetada para organizar entradas, identificar visitantes, controlar equipes e validar cÃ³digos com seguranÃ§a.</p>

    <p style="text-align:left;line-height:1.6;opacity:.95">Nosso sistema Ã© utilizado em:</p>
    <ul style="text-align:left;line-height:1.6;opacity:.95">
      <li>ğŸ¢ Empresas e escritÃ³rios</li>
      <li>ğŸ« Escolas e centros de ensino</li>
      <li>ğŸ« Eventos, feiras e produÃ§Ãµes</li>
      <li>ğŸšš LogÃ­stica e entregas</li>
      <li>ğŸ‘® Portarias e seguranÃ§a patrimonial</li>
    </ul>

    <p style="text-align:left;line-height:1.6;opacity:.95">O sistema pode funcionar sem instalaÃ§Ã£o de app; quando configurado com o nosso leitor sincronizado ele tambÃ©m suporta validaÃ§Ã£o offline e sincronizaÃ§Ã£o posterior.</p>
  </section>

</div>

<footer>Â© 2025 ESIP-Sistemas â€” Pronto para publicar no GitHub Pages</footer>

<script>
// small fade-in (only a simple effect)
document.querySelectorAll('.fade-in').forEach((el,i)=>{el.style.opacity=0;setTimeout(()=>{el.style.transition='opacity .6s, transform .6s';el.style.opacity=1;el.style.transform='translateY(0)';},100*i)});

let limit = 5;
let currentQR = null; // will hold reference to generated img/canvas

function generateQR(){
  if(limit<=0){document.getElementById('limitMsg').innerText='Limite atingido! Esta versÃ£o Ã© apenas para testes.';return}
  const text = (document.getElementById('qrText').value||'').trim();
  if(!text){alert('Digite algo para gerar o QR!');return}

  limit--;document.getElementById('limitMsg').innerText='Restam '+limit+' usos.';

  const container = document.getElementById('qrResult');
  container.innerHTML='';

  // create a wrapper so we can fetch the image later
  const wrapper = document.createElement('div');
  wrapper.style.padding='12px';
  wrapper.style.background='rgba(255,255,255,0.03)';
  wrapper.style.display='inline-block';
  wrapper.style.borderRadius='10px';

  new QRCode(wrapper, {text: 'INGR-'+text, width:260, height:260, correctLevel: QRCode.CorrectLevel.M});
  container.appendChild(wrapper);

  // enable download buttons after a short delay to allow QR rendering
  setTimeout(()=>{
    // try to get <img> or <canvas> created by QRCode lib
    const img = wrapper.querySelector('img');
    const canvas = wrapper.querySelector('canvas');
    currentQR = img || canvas || null;
    document.getElementById('downloadPNGBtn').disabled = !currentQR;
    document.getElementById('downloadPDFBtn').disabled = !currentQR;
  },150);
}

function downloadPNG(){
  if(!currentQR) return alert('Gere um QR primeiro.');
  if(currentQR.tagName.toLowerCase()==='img'){
    const a=document.createElement('a');a.href=currentQR.src;a.download='esip-qr.png';a.click();
  }else{
    const data = currentQR.toDataURL('image/png');
    const a=document.createElement('a');a.href=data;a.download='esip-qr.png';a.click();
  }
}

async function downloadPDF(){
  if(!currentQR) return alert('Gere um QR primeiro.');
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({unit:'pt',format:[300,380]});
  let dataUrl='';
  if(currentQR.tagName.toLowerCase()==='img') dataUrl=currentQR.src; else dataUrl=currentQR.toDataURL('image/png');
  // draw a little title and QR
  doc.setFontSize(12);
  doc.text('ESIP-Sistemas - QR de Teste',20,30);
  doc.addImage(dataUrl,'PNG',20,50,260,260);
  doc.save('esip-qr.pdf');
}

// register service worker for PWA
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('/sw.js').then(()=>console.log('Service Worker registrado')).catch(()=>console.log('Falha ao registrar Service Worker'));
}
</script>

</body>
</html>




<!-- FILE: leitor.html (pÃ¡gina do leitor - uso em dispositivos mÃ³veis) -->
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Leitor - ESIP-Sistemas</title>
  <link rel="icon" href="/icons/icon-192.png">
  <style>
    body{margin:0;font-family:Inter,Arial,sans-serif;background:#000;color:#fff;display:flex;flex-direction:column;height:100vh}
    header{padding:14px;text-align:center;background:#07102a}
    #video{width:100%;height:calc(100vh - 180px);object-fit:cover}
    .controls{display:flex;gap:8px;padding:12px;justify-content:center}
    .btn{padding:10px 14px;border-radius:8px;border:none;background:#1e2a78;color:#fff;font-weight:600}
    #output{padding:12px;text-align:center;background:rgba(255,255,255,0.03)}
  </style>
</head>
<body>
  <header>
    <strong>Leitor QR - ESIP</strong>
  </header>

  <video id="video" autoplay playsinline></video>
  <div class="controls">
    <button class="btn" id="toggleFlash">ğŸ”¦Lanterna</button>
    <button class="btn" id="stopBtn">â¹ Parar</button>
  </div>
  <div id="output">Aguardando leitura...</div>

  <script>
    // simple camera QR reader using the experimental BarcodeDetector if available,
    // fallback to scanning frames using jsQR is not included to keep this file light.

    const video = document.getElementById('video');
    const output = document.getElementById('output');
    const toggleFlash = document.getElementById('toggleFlash');
    const stopBtn = document.getElementById('stopBtn');

    let stream = null;
    let track = null;
    let torchOn = false;
    let scanning = true;

    async function startCamera(){
      try{
        stream = await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}});
        video.srcObject = stream;
        track = stream.getVideoTracks()[0];
        // try BarcodeDetector when available
        if(window.BarcodeDetector){
          const formats = ['qr_code'];
          const detector = new BarcodeDetector({formats});
          (async function scanLoop(){
            if(!scanning) return;
            try{
              const barcodes = await detector.detect(video);
              if(barcodes.length) handleResult(barcodes[0].rawValue);
            }catch(e){/* ignore */}
            requestAnimationFrame(scanLoop);
          })();
        }else{
          // simple fallback: take frames every 300ms and try to decode with built-in canvas libs
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          (async function frameLoop(){
            if(!scanning) return;
            try{
              canvas.width = video.videoWidth; canvas.height = video.videoHeight;
              ctx.drawImage(video,0,0,canvas.width,canvas.height);
              // try to use decode via barcode detector - not available - keep as placeholder
            }catch(e){}
            setTimeout(frameLoop,300);
          })();
        }
      }catch(err){output.innerText='Erro ao acessar cÃ¢mera: '+err.message}
    }

    function handleResult(value){
      scanning = false; // pause further detections until user restarts
      output.innerText = 'Lido: ' + value;
      // example: validate prefix
      if(value.startsWith('INGR-')){
        output.innerText += '\nStatus: VÃLIDO (teste)';
        // here you would verify antifraud checks, consultar DB, tocar som, etc.
      }else{
        output.innerText += '\nStatus: InvÃ¡lido';
      }
    }

    toggleFlash.addEventListener('click', async ()=>{
      if(!track){return alert('Lanterna nÃ£o disponÃ­vel neste dispositivo ou navegador.')}
      const cap = track.getCapabilities && track.getCapabilities();
      if(!cap || !cap.torch) return alert('Este navegador nÃ£o suporta controle de lanterna.');
      try{
        torchOn = !torchOn;
        await track.applyConstraints({advanced:[{torch:torchOn}]});
      }catch(e){alert('NÃ£o foi possÃ­vel alternar a lanterna: '+e.message)}
    });

    stopBtn.addEventListener('click', ()=>{
      scanning=false;
      if(stream){stream.getTracks().forEach(t=>t.stop());}
      output.innerText='Leitura parada.';
    });

    startCamera();
  </script>
</body>
</html>




<!-- FILE: manifest.json -->
{
  "name": "ESIP-Sistemas",
  "short_name": "ESIP",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#0a0f24",
  "theme_color": "#0a0f24",
  "icons": [
    { "src": "/icons/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icons/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}



<!-- FILE: sw.js (service worker) -->
const CACHE_NAME = 'esip-v1';
const ASSETS = [
  '/',
  '/index.html',
  '/leitor.html',
  '/manifest.json',
  '/icons/icon-192.png',
  '/icons/icon-512.png'
];

self.addEventListener('install', event => {
  event.waitUntil(caches.open(CACHE_NAME).then(cache => cache.addAll(ASSETS)));
});

self.addEventListener('activate', event => {
  event.waitUntil(self.clients.claim());
});

self.addEventListener('fetch', event => {
  event.respondWith(caches.match(event.request).then(resp => resp || fetch(event.request)));
});

